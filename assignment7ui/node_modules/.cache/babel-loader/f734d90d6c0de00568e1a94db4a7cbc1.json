{"ast":null,"code":"var path = require('path');\n\nvar mdeps = require('module-deps');\n\nvar depsSort = require('deps-sort');\n\nvar bpack = require('browser-pack');\n\nvar insertGlobals = require('insert-module-globals');\n\nvar syntaxError = require('syntax-error');\n\nvar builtins = require('./lib/builtins.js');\n\nvar splicer = require('labeled-stream-splicer');\n\nvar through = require('through2');\n\nvar concat = require('concat-stream');\n\nvar inherits = require('inherits');\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar xtend = require('xtend');\n\nvar isArray = Array.isArray;\n\nvar defined = require('defined');\n\nvar has = require('has');\n\nvar sanitize = require('htmlescape').sanitize;\n\nvar shasum = require('shasum-object');\n\nvar bresolve = require('browser-resolve');\n\nvar resolve = require('resolve');\n\nvar readonly = require('read-only-stream');\n\nmodule.exports = Browserify;\ninherits(Browserify, EventEmitter);\n\nvar fs = require('fs');\n\nvar path = require('path');\n\nvar cachedPathRelative = require('cached-path-relative');\n\nvar paths = {\n  empty: path.join(__dirname, 'lib/_empty.js')\n};\n\nfunction Browserify(files, opts) {\n  var self = this;\n  if (!(this instanceof Browserify)) return new Browserify(files, opts);\n  if (!opts) opts = {};\n\n  if (typeof files === 'string' || isArray(files) || isStream(files)) {\n    opts = xtend(opts, {\n      entries: [].concat(opts.entries || [], files)\n    });\n  } else opts = xtend(files, opts);\n\n  if (opts.node) {\n    opts.bare = true;\n    opts.browserField = false;\n  }\n\n  if (opts.bare) {\n    opts.builtins = false;\n    opts.commondir = false;\n\n    if (opts.insertGlobalVars === undefined) {\n      opts.insertGlobalVars = {};\n      Object.keys(insertGlobals.vars).forEach(function (name) {\n        if (name !== '__dirname' && name !== '__filename') {\n          opts.insertGlobalVars[name] = undefined;\n        }\n      });\n    }\n  }\n\n  self._options = opts;\n  if (opts.noparse) opts.noParse = opts.noparse;\n\n  if (opts.basedir !== undefined && typeof opts.basedir !== 'string') {\n    throw new Error('opts.basedir must be either undefined or a string.');\n  }\n\n  opts.dedupe = opts.dedupe === false ? false : true;\n  self._external = [];\n  self._exclude = [];\n  self._ignore = [];\n  self._expose = {};\n  self._hashes = {};\n  self._pending = 0;\n  self._transformOrder = 0;\n  self._transformPending = 0;\n  self._transforms = [];\n  self._entryOrder = 0;\n  self._ticked = false;\n  var browserField = opts.browserField;\n  self._bresolve = browserField === false ? function (id, opts, cb) {\n    if (!opts.basedir) opts.basedir = path.dirname(opts.filename);\n    resolve(id, opts, cb);\n  } : typeof browserField === 'string' ? function (id, opts, cb) {\n    opts.browser = browserField;\n    bresolve(id, opts, cb);\n  } : bresolve;\n  self._syntaxCache = {};\n  var ignoreTransform = [].concat(opts.ignoreTransform).filter(Boolean);\n\n  self._filterTransform = function (tr) {\n    if (isArray(tr)) {\n      return ignoreTransform.indexOf(tr[0]) === -1;\n    }\n\n    return ignoreTransform.indexOf(tr) === -1;\n  };\n\n  self.pipeline = self._createPipeline(opts);\n  [].concat(opts.transform).filter(Boolean).filter(self._filterTransform).forEach(function (tr) {\n    self.transform(tr);\n  });\n  [].concat(opts.entries).filter(Boolean).forEach(function (file) {\n    self.add(file, {\n      basedir: opts.basedir\n    });\n  });\n  [].concat(opts.require).filter(Boolean).forEach(function (file) {\n    self.require(file, {\n      basedir: opts.basedir\n    });\n  });\n  [].concat(opts.plugin).filter(Boolean).forEach(function (p) {\n    self.plugin(p, {\n      basedir: opts.basedir\n    });\n  });\n}\n\nBrowserify.prototype.require = function (file, opts) {\n  var self = this;\n\n  if (isArray(file)) {\n    file.forEach(function (x) {\n      if (typeof x === 'object') {\n        self.require(x.file, xtend(opts, x));\n      } else self.require(x, opts);\n    });\n    return this;\n  }\n\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, self._options.basedir, process.cwd());\n  var expose = opts.expose;\n\n  if (file === expose && /^[\\.]/.test(expose)) {\n    expose = '/' + relativePath(basedir, expose);\n  }\n\n  if (expose === undefined && this._options.exposeAll) {\n    expose = true;\n  }\n\n  if (expose === true) {\n    expose = '/' + relativePath(basedir, file);\n  }\n\n  if (isStream(file)) {\n    self._pending++;\n    var order = self._entryOrder++;\n    file.pipe(concat(function (buf) {\n      var filename = opts.file || file.file || path.join(basedir, '_stream_' + order + '.js');\n      var id = file.id || expose || filename;\n\n      if (expose || opts.entry === false) {\n        self._expose[id] = filename;\n      }\n\n      if (!opts.entry && self._options.exports === undefined) {\n        self._bpack.hasExports = true;\n      }\n\n      var rec = {\n        source: buf.toString('utf8'),\n        entry: defined(opts.entry, false),\n        file: filename,\n        id: id\n      };\n      if (rec.entry) rec.order = order;\n      if (rec.transform === false) rec.transform = false;\n      self.pipeline.write(rec);\n      if (--self._pending === 0) self.emit('_ready');\n    }));\n    return this;\n  }\n\n  var row;\n\n  if (typeof file === 'object') {\n    row = xtend(file, opts);\n  } else if (!opts.entry && isExternalModule(file)) {\n    // external module or builtin\n    row = xtend(opts, {\n      id: expose || file,\n      file: file\n    });\n  } else {\n    row = xtend(opts, {\n      file: path.resolve(basedir, file)\n    });\n  }\n\n  if (!row.id) {\n    row.id = expose || row.file;\n  }\n\n  if (expose || !row.entry) {\n    // Make this available to mdeps so that it can assign the value when it\n    // resolves the pathname.\n    row.expose = row.id;\n  }\n\n  if (opts.external) return self.external(file, opts);\n  if (row.entry === undefined) row.entry = false;\n\n  if (!row.entry && self._options.exports === undefined) {\n    self._bpack.hasExports = true;\n  }\n\n  if (row.entry) row.order = self._entryOrder++;\n  if (opts.transform === false) row.transform = false;\n  self.pipeline.write(row);\n  return self;\n};\n\nBrowserify.prototype.add = function (file, opts) {\n  var self = this;\n  if (!opts) opts = {};\n\n  if (isArray(file)) {\n    file.forEach(function (x) {\n      self.add(x, opts);\n    });\n    return this;\n  }\n\n  return this.require(file, xtend({\n    entry: true,\n    expose: false\n  }, opts));\n};\n\nBrowserify.prototype.external = function (file, opts) {\n  var self = this;\n\n  if (isArray(file)) {\n    file.forEach(function (f) {\n      if (typeof f === 'object') {\n        self.external(f, xtend(opts, f));\n      } else self.external(f, opts);\n    });\n    return this;\n  }\n\n  if (file && typeof file === 'object' && typeof file.bundle === 'function') {\n    var b = file;\n    self._pending++;\n    var bdeps = {};\n    var blabels = {};\n    b.on('label', function (prev, id) {\n      self._external.push(id);\n\n      if (prev !== id) {\n        blabels[prev] = id;\n\n        self._external.push(prev);\n      }\n    });\n    b.pipeline.get('deps').push(through.obj(function (row, enc, next) {\n      bdeps = xtend(bdeps, row.deps);\n      this.push(row);\n      next();\n    }));\n    self.on('dep', function (row) {\n      Object.keys(row.deps).forEach(function (key) {\n        var prev = bdeps[key];\n\n        if (prev) {\n          var id = blabels[prev];\n\n          if (id) {\n            row.indexDeps[key] = id;\n          }\n        }\n      });\n    });\n    b.pipeline.get('label').once('end', function () {\n      if (--self._pending === 0) self.emit('_ready');\n    });\n    return this;\n  }\n\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, process.cwd());\n\n  this._external.push(file);\n\n  this._external.push('/' + relativePath(basedir, file));\n\n  return this;\n};\n\nBrowserify.prototype.exclude = function (file, opts) {\n  if (!opts) opts = {};\n\n  if (isArray(file)) {\n    var self = this;\n    file.forEach(function (file) {\n      self.exclude(file, opts);\n    });\n    return this;\n  }\n\n  var basedir = defined(opts.basedir, process.cwd());\n\n  this._exclude.push(file);\n\n  this._exclude.push('/' + relativePath(basedir, file));\n\n  return this;\n};\n\nBrowserify.prototype.ignore = function (file, opts) {\n  if (!opts) opts = {};\n\n  if (isArray(file)) {\n    var self = this;\n    file.forEach(function (file) {\n      self.ignore(file, opts);\n    });\n    return this;\n  }\n\n  var basedir = defined(opts.basedir, process.cwd()); // Handle relative paths\n\n  if (file[0] === '.') {\n    this._ignore.push(path.resolve(basedir, file));\n  } else {\n    this._ignore.push(file);\n  }\n\n  return this;\n};\n\nBrowserify.prototype.transform = function (tr, opts) {\n  var self = this;\n\n  if (typeof opts === 'function' || typeof opts === 'string') {\n    tr = [opts, tr];\n  }\n\n  if (isArray(tr)) {\n    opts = tr[1];\n    tr = tr[0];\n  } //if the bundler is ignoring this transform\n\n\n  if (typeof tr === 'string' && !self._filterTransform(tr)) {\n    return this;\n  }\n\n  function resolved() {\n    self._transforms[order] = rec;\n    --self._pending;\n\n    if (--self._transformPending === 0) {\n      self._transforms.forEach(function (transform) {\n        self.pipeline.write(transform);\n      });\n\n      if (self._pending === 0) {\n        self.emit('_ready');\n      }\n    }\n  }\n\n  if (!opts) opts = {};\n  opts._flags = '_flags' in opts ? opts._flags : self._options;\n  var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n  var order = self._transformOrder++;\n  self._pending++;\n  self._transformPending++;\n  var rec = {\n    transform: tr,\n    options: opts,\n    global: opts.global\n  };\n\n  if (typeof tr === 'string') {\n    var topts = {\n      basedir: basedir,\n      paths: (self._options.paths || []).map(function (p) {\n        return path.resolve(basedir, p);\n      })\n    };\n    resolve(tr, topts, function (err, res) {\n      if (err) return self.emit('error', err);\n      rec.transform = res;\n      resolved();\n    });\n  } else process.nextTick(resolved);\n\n  return this;\n};\n\nBrowserify.prototype.plugin = function (p, opts) {\n  if (isArray(p)) {\n    opts = p[1];\n    p = p[0];\n  }\n\n  if (!opts) opts = {};\n  var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n\n  if (typeof p === 'function') {\n    p(this, opts);\n  } else {\n    var pfile = resolve.sync(String(p), {\n      basedir: basedir\n    });\n\n    var f = require(pfile);\n\n    if (typeof f !== 'function') {\n      throw new Error('plugin ' + p + ' should export a function');\n    }\n\n    f(this, opts);\n  }\n\n  return this;\n};\n\nBrowserify.prototype._createPipeline = function (opts) {\n  var self = this;\n  if (!opts) opts = {};\n  this._mdeps = this._createDeps(opts);\n\n  this._mdeps.on('file', function (file, id) {\n    pipeline.emit('file', file, id);\n    self.emit('file', file, id);\n  });\n\n  this._mdeps.on('package', function (pkg) {\n    pipeline.emit('package', pkg);\n    self.emit('package', pkg);\n  });\n\n  this._mdeps.on('transform', function (tr, file) {\n    pipeline.emit('transform', tr, file);\n    self.emit('transform', tr, file);\n  });\n\n  var dopts = {\n    index: !opts.fullPaths && !opts.exposeAll,\n    dedupe: opts.dedupe,\n    expose: this._expose\n  };\n  this._bpack = bpack(xtend(opts, {\n    raw: true\n  }));\n  var pipeline = splicer.obj(['record', [this._recorder()], 'deps', [this._mdeps], 'json', [this._json()], 'unbom', [this._unbom()], 'unshebang', [this._unshebang()], 'syntax', [this._syntax()], 'sort', [depsSort(dopts)], 'dedupe', [this._dedupe()], 'label', [this._label(opts)], 'emit-deps', [this._emitDeps()], 'debug', [this._debug(opts)], 'pack', [this._bpack], 'wrap', []]);\n\n  if (opts.exposeAll) {\n    var basedir = defined(opts.basedir, process.cwd());\n    pipeline.get('deps').push(through.obj(function (row, enc, next) {\n      if (self._external.indexOf(row.id) >= 0) return next();\n      if (self._external.indexOf(row.file) >= 0) return next();\n\n      if (isAbsolutePath(row.id)) {\n        row.id = '/' + relativePath(basedir, row.file);\n      }\n\n      Object.keys(row.deps || {}).forEach(function (key) {\n        row.deps[key] = '/' + relativePath(basedir, row.deps[key]);\n      });\n      this.push(row);\n      next();\n    }));\n  }\n\n  return pipeline;\n};\n\nBrowserify.prototype._createDeps = function (opts) {\n  var self = this;\n  var mopts = xtend(opts);\n  var basedir = defined(opts.basedir, process.cwd()); // Let mdeps populate these values since it will be resolving file paths\n  // anyway.\n\n  mopts.expose = this._expose;\n  mopts.extensions = ['.js', '.json'].concat(mopts.extensions || []);\n  self._extensions = mopts.extensions;\n  mopts.transform = [];\n  mopts.transformKey = defined(opts.transformKey, ['browserify', 'transform']);\n\n  mopts.postFilter = function (id, file, pkg) {\n    if (opts.postFilter && !opts.postFilter(id, file, pkg)) return false;\n    if (self._external.indexOf(file) >= 0) return false;\n    if (self._exclude.indexOf(file) >= 0) return false; //filter transforms on module dependencies\n\n    if (pkg && pkg.browserify && pkg.browserify.transform) {\n      //In edge cases it may be a string\n      pkg.browserify.transform = [].concat(pkg.browserify.transform).filter(Boolean).filter(self._filterTransform);\n    }\n\n    return true;\n  };\n\n  mopts.filter = function (id) {\n    if (opts.filter && !opts.filter(id)) return false;\n    if (self._external.indexOf(id) >= 0) return false;\n    if (self._exclude.indexOf(id) >= 0) return false;\n\n    if (opts.bundleExternal === false && isExternalModule(id)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  mopts.resolve = function (id, parent, cb) {\n    if (self._ignore.indexOf(id) >= 0) return cb(null, paths.empty, {});\n\n    self._bresolve(id, parent, function (err, file, pkg) {\n      if (file && self._ignore.indexOf(file) >= 0) {\n        return cb(null, paths.empty, {});\n      }\n\n      if (file && self._ignore.length) {\n        var nm = file.replace(/\\\\/g, '/').split('/node_modules/')[1];\n\n        if (nm) {\n          nm = nm.split('/')[0];\n\n          if (self._ignore.indexOf(nm) >= 0) {\n            return cb(null, paths.empty, {});\n          }\n        }\n      }\n\n      if (file) {\n        var ex = '/' + relativePath(basedir, file);\n\n        if (self._external.indexOf(ex) >= 0) {\n          return cb(null, ex);\n        }\n\n        if (self._exclude.indexOf(ex) >= 0) {\n          return cb(null, ex);\n        }\n\n        if (self._ignore.indexOf(ex) >= 0) {\n          return cb(null, paths.empty, {});\n        }\n      }\n\n      if (err) cb(err, file, pkg);else if (file) {\n        if (opts.preserveSymlinks && parent.id !== self._mdeps.top.id) {\n          return cb(err, path.resolve(file), pkg, file);\n        }\n\n        fs.realpath(file, function (err, res) {\n          cb(err, res, pkg, file);\n        });\n      } else cb(err, null, pkg);\n    });\n  };\n\n  if (opts.builtins === false) {\n    mopts.modules = {};\n\n    self._exclude.push.apply(self._exclude, Object.keys(builtins));\n  } else if (opts.builtins && isArray(opts.builtins)) {\n    mopts.modules = {};\n    opts.builtins.forEach(function (key) {\n      mopts.modules[key] = builtins[key];\n    });\n  } else if (opts.builtins && typeof opts.builtins === 'object') {\n    mopts.modules = opts.builtins;\n  } else mopts.modules = xtend(builtins);\n\n  Object.keys(builtins).forEach(function (key) {\n    if (!has(mopts.modules, key)) self._exclude.push(key);\n  });\n  mopts.globalTransform = [];\n\n  if (!this._bundled) {\n    this.once('bundle', function () {\n      self.pipeline.write({\n        transform: globalTr,\n        global: true,\n        options: {}\n      });\n    });\n  }\n\n  var no = [].concat(opts.noParse).filter(Boolean);\n  var absno = no.filter(function (x) {\n    return typeof x === 'string';\n  }).map(function (x) {\n    return path.resolve(basedir, x);\n  });\n\n  function globalTr(file) {\n    if (opts.detectGlobals === false) return through();\n    if (opts.noParse === true) return through();\n    if (no.indexOf(file) >= 0) return through();\n    if (absno.indexOf(file) >= 0) return through();\n    var parts = file.replace(/\\\\/g, '/').split('/node_modules/');\n\n    for (var i = 0; i < no.length; i++) {\n      if (typeof no[i] === 'function' && no[i](file)) {\n        return through();\n      } else if (no[i] === parts[parts.length - 1].split('/')[0]) {\n        return through();\n      } else if (no[i] === parts[parts.length - 1]) {\n        return through();\n      }\n    }\n\n    if (opts.commondir === false && opts.builtins === false) {\n      opts.insertGlobalVars = xtend({\n        __dirname: function (file, basedir) {\n          var dir = path.dirname(path.relative(basedir, file));\n          return 'require(\"path\").join(__dirname,' + dir.split(path.sep).map(JSON.stringify).join(',') + ')';\n        },\n        __filename: function (file, basedir) {\n          var filename = path.relative(basedir, file);\n          return 'require(\"path\").join(__dirname,' + filename.split(path.sep).map(JSON.stringify).join(',') + ')';\n        }\n      }, opts.insertGlobalVars);\n    }\n\n    var vars = xtend({\n      process: function () {\n        return \"require('_process')\";\n      }\n    }, opts.insertGlobalVars);\n\n    if (opts.bundleExternal === false) {\n      vars.process = undefined;\n      vars.buffer = undefined;\n    }\n\n    return insertGlobals(file, xtend(opts, {\n      debug: opts.debug,\n      always: opts.insertGlobals,\n      basedir: opts.commondir === false && isArray(opts.builtins) ? '/' : opts.basedir || process.cwd(),\n      vars: vars\n    }));\n  }\n\n  return mdeps(mopts);\n};\n\nBrowserify.prototype._recorder = function (opts) {\n  var self = this;\n  var ended = false;\n  this._recorded = [];\n\n  if (!this._ticked) {\n    process.nextTick(function () {\n      self._ticked = true;\n\n      self._recorded.forEach(function (row) {\n        stream.push(row);\n      });\n\n      if (ended) stream.push(null);\n    });\n  }\n\n  var stream = through.obj(write, end);\n  return stream;\n\n  function write(row, enc, next) {\n    self._recorded.push(row);\n\n    if (self._ticked) this.push(row);\n    next();\n  }\n\n  function end() {\n    ended = true;\n    if (self._ticked) this.push(null);\n  }\n};\n\nBrowserify.prototype._json = function () {\n  return through.obj(function (row, enc, next) {\n    if (/\\.json$/.test(row.file)) {\n      var sanitizedString = sanitize(row.source);\n\n      try {\n        // check json validity\n        JSON.parse(sanitizedString);\n        row.source = 'module.exports=' + sanitizedString;\n      } catch (err) {\n        err.message = 'While parsing ' + (row.file || row.id) + ': ' + err.message;\n        this.emit('error', err);\n        return;\n      }\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._unbom = function () {\n  return through.obj(function (row, enc, next) {\n    if (/^\\ufeff/.test(row.source)) {\n      row.source = row.source.replace(/^\\ufeff/, '');\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._unshebang = function () {\n  return through.obj(function (row, enc, next) {\n    if (/^#!/.test(row.source)) {\n      row.source = row.source.replace(/^#![^\\n]*\\n/, '');\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._syntax = function () {\n  var self = this;\n  return through.obj(function (row, enc, next) {\n    var h = shasum(row.source);\n\n    if (typeof self._syntaxCache[h] === 'undefined') {\n      var err = syntaxError(row.source, row.file || row.id);\n      if (err) return this.emit('error', err);\n      self._syntaxCache[h] = true;\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._dedupe = function () {\n  return through.obj(function (row, enc, next) {\n    if (!row.dedupeIndex && row.dedupe) {\n      row.source = 'arguments[4][' + JSON.stringify(row.dedupe) + '][0].apply(exports,arguments)';\n      row.nomap = true;\n    } else if (row.dedupeIndex) {\n      row.source = 'arguments[4][' + JSON.stringify(row.dedupeIndex) + '][0].apply(exports,arguments)';\n      row.nomap = true;\n    }\n\n    if (row.dedupeIndex && row.indexDeps) {\n      row.indexDeps.dup = row.dedupeIndex;\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._label = function (opts) {\n  var self = this;\n  var basedir = defined(opts.basedir, process.cwd());\n  return through.obj(function (row, enc, next) {\n    var prev = row.id;\n    if (self._external.indexOf(row.id) >= 0) return next();\n\n    if (self._external.indexOf('/' + relativePath(basedir, row.id)) >= 0) {\n      return next();\n    }\n\n    if (self._external.indexOf(row.file) >= 0) return next();\n    if (row.index) row.id = row.index;\n    self.emit('label', prev, row.id);\n    if (row.indexDeps) row.deps = row.indexDeps || {};\n    Object.keys(row.deps).forEach(function (key) {\n      if (self._expose[key]) {\n        row.deps[key] = key;\n        return;\n      }\n\n      var afile = path.resolve(path.dirname(row.file), key);\n      var rfile = '/' + relativePath(basedir, afile);\n\n      if (self._external.indexOf(rfile) >= 0) {\n        row.deps[key] = rfile;\n      }\n\n      if (self._external.indexOf(afile) >= 0) {\n        row.deps[key] = rfile;\n      }\n\n      if (self._external.indexOf(key) >= 0) {\n        row.deps[key] = key;\n        return;\n      }\n\n      for (var i = 0; i < self._extensions.length; i++) {\n        var ex = self._extensions[i];\n\n        if (self._external.indexOf(rfile + ex) >= 0) {\n          row.deps[key] = rfile + ex;\n          break;\n        }\n      }\n    });\n\n    if (row.entry || row.expose) {\n      self._bpack.standaloneModule = row.id;\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._emitDeps = function () {\n  var self = this;\n  return through.obj(function (row, enc, next) {\n    self.emit('dep', row);\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype._debug = function (opts) {\n  var basedir = defined(opts.basedir, process.cwd());\n  return through.obj(function (row, enc, next) {\n    if (opts.debug) {\n      row.sourceRoot = 'file://localhost';\n      row.sourceFile = relativePath(basedir, row.file);\n    }\n\n    this.push(row);\n    next();\n  });\n};\n\nBrowserify.prototype.reset = function (opts) {\n  if (!opts) opts = {};\n  var hadExports = this._bpack.hasExports;\n  this.pipeline = this._createPipeline(xtend(opts, this._options));\n  this._bpack.hasExports = hadExports;\n  this._entryOrder = 0;\n  this._bundled = false;\n  this.emit('reset');\n};\n\nBrowserify.prototype.bundle = function (cb) {\n  var self = this;\n\n  if (cb && typeof cb === 'object') {\n    throw new Error('bundle() no longer accepts option arguments.\\n' + 'Move all option arguments to the browserify() constructor.');\n  }\n\n  if (this._bundled) {\n    var recorded = this._recorded;\n    this.reset();\n    recorded.forEach(function (x) {\n      self.pipeline.write(x);\n    });\n  }\n\n  var output = readonly(this.pipeline);\n\n  if (cb) {\n    output.on('error', cb);\n    output.pipe(concat(function (body) {\n      cb(null, body);\n    }));\n  }\n\n  function ready() {\n    self.emit('bundle', output);\n    self.pipeline.end();\n  }\n\n  if (this._pending === 0) ready();else this.once('_ready', ready);\n  this._bundled = true;\n  return output;\n};\n\nfunction isStream(s) {\n  return s && typeof s.pipe === 'function';\n}\n\nfunction isAbsolutePath(file) {\n  var regexp = process.platform === 'win32' ? /^\\w:/ : /^\\//;\n  return regexp.test(file);\n}\n\nfunction isExternalModule(file) {\n  var regexp = process.platform === 'win32' ? /^(\\.|\\w:)/ : /^[\\/.]/;\n  return !regexp.test(file);\n}\n\nfunction relativePath(from, to) {\n  // Replace \\ with / for OS-independent behavior\n  return cachedPathRelative(from, to).replace(/\\\\/g, '/');\n}","map":{"version":3,"sources":["C:/Users/shashidhar/OneDrive/Desktop/assignment8ui/node_modules/browserify/index.js"],"names":["path","require","mdeps","depsSort","bpack","insertGlobals","syntaxError","builtins","splicer","through","concat","inherits","EventEmitter","xtend","isArray","Array","defined","has","sanitize","shasum","bresolve","resolve","readonly","module","exports","Browserify","fs","cachedPathRelative","paths","empty","join","__dirname","files","opts","self","isStream","entries","node","bare","browserField","commondir","insertGlobalVars","undefined","Object","keys","vars","forEach","name","_options","noparse","noParse","basedir","Error","dedupe","_external","_exclude","_ignore","_expose","_hashes","_pending","_transformOrder","_transformPending","_transforms","_entryOrder","_ticked","_bresolve","id","cb","dirname","filename","browser","_syntaxCache","ignoreTransform","filter","Boolean","_filterTransform","tr","indexOf","pipeline","_createPipeline","transform","file","add","plugin","p","prototype","x","process","cwd","expose","test","relativePath","exposeAll","order","pipe","buf","entry","_bpack","hasExports","rec","source","toString","write","emit","row","isExternalModule","external","f","bundle","b","bdeps","blabels","on","prev","push","get","obj","enc","next","deps","key","indexDeps","once","exclude","ignore","resolved","_flags","options","global","topts","map","err","res","nextTick","pfile","sync","String","_mdeps","_createDeps","pkg","dopts","index","fullPaths","raw","_recorder","_json","_unbom","_unshebang","_syntax","_dedupe","_label","_emitDeps","_debug","isAbsolutePath","mopts","extensions","_extensions","transformKey","postFilter","browserify","bundleExternal","parent","length","nm","replace","split","ex","preserveSymlinks","top","realpath","modules","apply","globalTransform","_bundled","globalTr","no","absno","detectGlobals","parts","i","dir","relative","sep","JSON","stringify","__filename","buffer","debug","always","ended","_recorded","stream","end","sanitizedString","parse","message","h","dedupeIndex","nomap","dup","afile","rfile","standaloneModule","sourceRoot","sourceFile","reset","hadExports","recorded","output","body","ready","s","regexp","platform","from","to"],"mappings":"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","sourcesContent":["var path = require('path');\nvar mdeps = require('module-deps');\nvar depsSort = require('deps-sort');\nvar bpack = require('browser-pack');\nvar insertGlobals = require('insert-module-globals');\nvar syntaxError = require('syntax-error');\n\nvar builtins = require('./lib/builtins.js');\n\nvar splicer = require('labeled-stream-splicer');\nvar through = require('through2');\nvar concat = require('concat-stream');\n\nvar inherits = require('inherits');\nvar EventEmitter = require('events').EventEmitter;\nvar xtend = require('xtend');\nvar isArray = Array.isArray;\nvar defined = require('defined');\nvar has = require('has');\nvar sanitize = require('htmlescape').sanitize;\nvar shasum = require('shasum-object');\n\nvar bresolve = require('browser-resolve');\nvar resolve = require('resolve');\n\nvar readonly = require('read-only-stream');\n\nmodule.exports = Browserify;\ninherits(Browserify, EventEmitter);\n\nvar fs = require('fs');\nvar path = require('path');\nvar cachedPathRelative = require('cached-path-relative');\n\nvar paths = {\n    empty: path.join(__dirname, 'lib/_empty.js')\n};\n\nfunction Browserify (files, opts) {\n    var self = this;\n    if (!(this instanceof Browserify)) return new Browserify(files, opts);\n    if (!opts) opts = {};\n    \n    if (typeof files === 'string' || isArray(files) || isStream(files)) {\n        opts = xtend(opts, { entries: [].concat(opts.entries || [], files) });\n    }\n    else opts = xtend(files, opts);\n\n    if (opts.node) {\n        opts.bare = true;\n        opts.browserField = false;\n    }\n    if (opts.bare) {\n        opts.builtins = false;\n        opts.commondir = false;\n        if (opts.insertGlobalVars === undefined) {\n            opts.insertGlobalVars = {}\n            Object.keys(insertGlobals.vars).forEach(function (name) {\n                if (name !== '__dirname' && name !== '__filename') {\n                    opts.insertGlobalVars[name] = undefined;\n                }\n            })\n        }\n    }\n    \n    self._options = opts;\n    if (opts.noparse) opts.noParse = opts.noparse;\n    \n    if (opts.basedir !== undefined && typeof opts.basedir !== 'string') {\n        throw new Error('opts.basedir must be either undefined or a string.');\n    }\n\n    opts.dedupe = opts.dedupe === false ? false : true;\n\n    self._external = [];\n    self._exclude = [];\n    self._ignore = [];\n    self._expose = {};\n    self._hashes = {};\n    self._pending = 0;\n    self._transformOrder = 0;\n    self._transformPending = 0;\n    self._transforms = [];\n    self._entryOrder = 0;\n    self._ticked = false;\n\n    var browserField = opts.browserField\n    self._bresolve = browserField === false\n        ? function (id, opts, cb) {\n            if (!opts.basedir) opts.basedir = path.dirname(opts.filename)\n            resolve(id, opts, cb)\n        }\n        : typeof browserField === 'string'\n            ? function (id, opts, cb) {\n                opts.browser = browserField\n                bresolve(id, opts, cb)\n            }\n            : bresolve\n    ;\n    self._syntaxCache = {};\n\n    var ignoreTransform = [].concat(opts.ignoreTransform).filter(Boolean);\n    self._filterTransform = function (tr) {\n        if (isArray(tr)) {\n            return ignoreTransform.indexOf(tr[0]) === -1;\n        }\n        return ignoreTransform.indexOf(tr) === -1;\n    };\n\n    self.pipeline = self._createPipeline(opts);\n    \n    [].concat(opts.transform).filter(Boolean).filter(self._filterTransform)\n    .forEach(function (tr) {\n        self.transform(tr);\n    });\n    \n    [].concat(opts.entries).filter(Boolean).forEach(function (file) {\n        self.add(file, { basedir: opts.basedir });\n    });\n    \n    [].concat(opts.require).filter(Boolean).forEach(function (file) {\n        self.require(file, { basedir: opts.basedir });\n    });\n    \n    [].concat(opts.plugin).filter(Boolean).forEach(function (p) {\n        self.plugin(p, { basedir: opts.basedir });\n    });\n}\n\nBrowserify.prototype.require = function (file, opts) {\n    var self = this;\n    if (isArray(file)) {\n        file.forEach(function (x) {\n            if (typeof x === 'object') {\n                self.require(x.file, xtend(opts, x));\n            }\n            else self.require(x, opts);\n        });\n        return this;\n    }\n    \n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, self._options.basedir, process.cwd());\n    var expose = opts.expose;\n    if (file === expose && /^[\\.]/.test(expose)) {\n        expose = '/' + relativePath(basedir, expose);\n    }\n    if (expose === undefined && this._options.exposeAll) {\n        expose = true;\n    }\n    if (expose === true) {\n        expose = '/' + relativePath(basedir, file);\n    }\n    \n    if (isStream(file)) {\n        self._pending ++;\n        var order = self._entryOrder ++;\n        file.pipe(concat(function (buf) {\n            var filename = opts.file || file.file || path.join(\n                basedir,\n                '_stream_' + order + '.js'\n            );\n            var id = file.id || expose || filename;\n            if (expose || opts.entry === false) {\n                self._expose[id] = filename;\n            }\n            if (!opts.entry && self._options.exports === undefined) {\n                self._bpack.hasExports = true;\n            }\n            var rec = {\n                source: buf.toString('utf8'),\n                entry: defined(opts.entry, false),\n                file: filename,\n                id: id\n            };\n            if (rec.entry) rec.order = order;\n            if (rec.transform === false) rec.transform = false;\n            self.pipeline.write(rec);\n            \n            if (-- self._pending === 0) self.emit('_ready');\n        }));\n        return this;\n    }\n    \n    var row;\n    if (typeof file === 'object') {\n        row = xtend(file, opts);\n    }\n    else if (!opts.entry && isExternalModule(file)) {\n        // external module or builtin\n        row = xtend(opts, { id: expose || file, file: file });\n    }\n    else {\n        row = xtend(opts, { file: path.resolve(basedir, file) });\n    }\n    \n    if (!row.id) {\n        row.id = expose || row.file;\n    }\n    if (expose || !row.entry) {\n        // Make this available to mdeps so that it can assign the value when it\n        // resolves the pathname.\n        row.expose = row.id;\n    }\n    \n    if (opts.external) return self.external(file, opts);\n    if (row.entry === undefined) row.entry = false;\n    \n    if (!row.entry && self._options.exports === undefined) {\n        self._bpack.hasExports = true;\n    }\n    \n    if (row.entry) row.order = self._entryOrder ++;\n    \n    if (opts.transform === false) row.transform = false;\n    self.pipeline.write(row);\n    return self;\n};\n\nBrowserify.prototype.add = function (file, opts) {\n    var self = this;\n    if (!opts) opts = {};\n    if (isArray(file)) {\n        file.forEach(function (x) { self.add(x, opts) });\n        return this;\n    }\n    return this.require(file, xtend({ entry: true, expose: false }, opts));\n};\n\nBrowserify.prototype.external = function (file, opts) {\n    var self = this;\n    if (isArray(file)) {\n        file.forEach(function (f) {\n            if (typeof f === 'object') {\n                self.external(f, xtend(opts, f));\n            }\n            else self.external(f, opts)\n        });\n        return this;\n    }\n    if (file && typeof file === 'object' && typeof file.bundle === 'function') {\n        var b = file;\n        self._pending ++;\n\n        var bdeps = {};\n        var blabels = {};\n\n        b.on('label', function (prev, id) {\n            self._external.push(id);\n\n            if (prev !== id) {\n                blabels[prev] = id;\n                self._external.push(prev);\n            }\n        });\n\n        b.pipeline.get('deps').push(through.obj(function (row, enc, next) {\n            bdeps = xtend(bdeps, row.deps);\n            this.push(row);\n            next();\n        }));\n\n        self.on('dep', function (row) {\n            Object.keys(row.deps).forEach(function (key) {\n                var prev = bdeps[key];\n                if (prev) {\n                    var id = blabels[prev];\n                    if (id) {\n                        row.indexDeps[key] = id;\n                    }\n                }\n            });\n        });\n\n        b.pipeline.get('label').once('end', function () {\n            if (-- self._pending === 0) self.emit('_ready');\n        });\n        return this;\n    }\n    \n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, process.cwd());\n    this._external.push(file);\n    this._external.push('/' + relativePath(basedir, file));\n    return this;\n};\n\nBrowserify.prototype.exclude = function (file, opts) {\n    if (!opts) opts = {};\n    if (isArray(file)) {\n        var self = this;\n        file.forEach(function(file) {\n            self.exclude(file, opts);\n        });\n        return this;\n    }\n    var basedir = defined(opts.basedir, process.cwd());\n    this._exclude.push(file);\n    this._exclude.push('/' + relativePath(basedir, file));\n    return this;\n};\n\nBrowserify.prototype.ignore = function (file, opts) {\n    if (!opts) opts = {};\n    if (isArray(file)) {\n        var self = this;\n        file.forEach(function(file) {\n            self.ignore(file, opts);\n        });\n        return this;\n    }\n    var basedir = defined(opts.basedir, process.cwd());\n\n    // Handle relative paths\n    if (file[0] === '.') {\n        this._ignore.push(path.resolve(basedir, file));\n    }\n    else {\n        this._ignore.push(file);\n    }\n    return this;\n};\n\nBrowserify.prototype.transform = function (tr, opts) {\n    var self = this;\n    if (typeof opts === 'function' || typeof opts === 'string') {\n        tr = [ opts, tr ];\n    }\n    if (isArray(tr)) {\n        opts = tr[1];\n        tr = tr[0];\n    }\n    \n    //if the bundler is ignoring this transform\n    if (typeof tr === 'string' && !self._filterTransform(tr)) {\n        return this;\n    }\n\n    function resolved () {\n      self._transforms[order] = rec;\n      -- self._pending;\n      if (-- self._transformPending === 0) {\n          self._transforms.forEach(function (transform) {\n            self.pipeline.write(transform);\n          });\n\n          if (self._pending === 0) {\n            self.emit('_ready');\n          }\n      }\n    }\n    \n    if (!opts) opts = {};\n    opts._flags = '_flags' in opts ? opts._flags : self._options;\n    \n    var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n    var order = self._transformOrder ++;\n    self._pending ++;\n    self._transformPending ++;\n\n    var rec = {\n        transform: tr,\n        options: opts,\n        global: opts.global\n    };\n\n    if (typeof tr === 'string') {\n        var topts = {\n            basedir: basedir,\n            paths: (self._options.paths || []).map(function (p) {\n                return path.resolve(basedir, p);\n            })\n        };\n        resolve(tr, topts, function (err, res) {\n            if (err) return self.emit('error', err);\n            rec.transform = res;\n            resolved();\n        });\n    }\n    else process.nextTick(resolved);\n    return this;\n};\n\nBrowserify.prototype.plugin = function (p, opts) {\n    if (isArray(p)) {\n        opts = p[1];\n        p = p[0];\n    }\n    if (!opts) opts = {};\n    var basedir = defined(opts.basedir, this._options.basedir, process.cwd());\n    if (typeof p === 'function') {\n        p(this, opts);\n    }\n    else {\n        var pfile = resolve.sync(String(p), { basedir: basedir })\n        var f = require(pfile);\n        if (typeof f !== 'function') {\n            throw new Error('plugin ' + p + ' should export a function');\n        }\n        f(this, opts);\n    }\n    return this;\n};\n\nBrowserify.prototype._createPipeline = function (opts) {\n    var self = this;\n    if (!opts) opts = {};\n    this._mdeps = this._createDeps(opts);\n    this._mdeps.on('file', function (file, id) {\n        pipeline.emit('file', file, id);\n        self.emit('file', file, id);\n    });\n    this._mdeps.on('package', function (pkg) {\n        pipeline.emit('package', pkg);\n        self.emit('package', pkg);\n    });\n    this._mdeps.on('transform', function (tr, file) {\n        pipeline.emit('transform', tr, file);\n        self.emit('transform', tr, file);\n    });\n    \n    var dopts = {\n        index: !opts.fullPaths && !opts.exposeAll,\n        dedupe: opts.dedupe,\n        expose: this._expose\n    };\n    this._bpack = bpack(xtend(opts, { raw: true }));\n    \n    var pipeline = splicer.obj([\n        'record', [ this._recorder() ],\n        'deps', [ this._mdeps ],\n        'json', [ this._json() ],\n        'unbom', [ this._unbom() ],\n        'unshebang', [ this._unshebang() ],\n        'syntax', [ this._syntax() ],\n        'sort', [ depsSort(dopts) ],\n        'dedupe', [ this._dedupe() ],\n        'label', [ this._label(opts) ],\n        'emit-deps', [ this._emitDeps() ],\n        'debug', [ this._debug(opts) ],\n        'pack', [ this._bpack ],\n        'wrap', []\n    ]);\n    if (opts.exposeAll) {\n        var basedir = defined(opts.basedir, process.cwd());\n        pipeline.get('deps').push(through.obj(function (row, enc, next) {\n            if (self._external.indexOf(row.id) >= 0) return next();\n            if (self._external.indexOf(row.file) >= 0) return next();\n            \n            if (isAbsolutePath(row.id)) {\n                row.id = '/' + relativePath(basedir, row.file);\n            }\n            Object.keys(row.deps || {}).forEach(function (key) {\n                row.deps[key] = '/' + relativePath(basedir, row.deps[key]);\n            });\n            this.push(row);\n            next();\n        }));\n    }\n    return pipeline;\n};\n\nBrowserify.prototype._createDeps = function (opts) {\n    var self = this;\n    var mopts = xtend(opts);\n    var basedir = defined(opts.basedir, process.cwd());\n\n    // Let mdeps populate these values since it will be resolving file paths\n    // anyway.\n    mopts.expose = this._expose;\n    mopts.extensions = [ '.js', '.json' ].concat(mopts.extensions || []);\n    self._extensions = mopts.extensions;\n\n    mopts.transform = [];\n    mopts.transformKey = defined(opts.transformKey, [ 'browserify', 'transform' ]);\n    mopts.postFilter = function (id, file, pkg) {\n        if (opts.postFilter && !opts.postFilter(id, file, pkg)) return false;\n        if (self._external.indexOf(file) >= 0) return false;\n        if (self._exclude.indexOf(file) >= 0) return false;\n\n        //filter transforms on module dependencies\n        if (pkg && pkg.browserify && pkg.browserify.transform) {\n            //In edge cases it may be a string\n            pkg.browserify.transform = [].concat(pkg.browserify.transform)\n                    .filter(Boolean)\n                    .filter(self._filterTransform);\n        }\n        return true;\n    };\n    mopts.filter = function (id) {\n        if (opts.filter && !opts.filter(id)) return false;\n        if (self._external.indexOf(id) >= 0) return false;\n        if (self._exclude.indexOf(id) >= 0) return false;\n        if (opts.bundleExternal === false && isExternalModule(id)) {\n            return false;\n        }\n        return true;\n    };\n    mopts.resolve = function (id, parent, cb) {\n        if (self._ignore.indexOf(id) >= 0) return cb(null, paths.empty, {});\n        \n        self._bresolve(id, parent, function (err, file, pkg) {\n            if (file && self._ignore.indexOf(file) >= 0) {\n                return cb(null, paths.empty, {});\n            }\n            if (file && self._ignore.length) {\n                var nm = file.replace(/\\\\/g, '/').split('/node_modules/')[1];\n                if (nm) {\n                    nm = nm.split('/')[0];\n                    if (self._ignore.indexOf(nm) >= 0) {\n                        return cb(null, paths.empty, {});\n                    }\n                }\n            }\n            \n            if (file) {\n                var ex = '/' + relativePath(basedir, file);\n                if (self._external.indexOf(ex) >= 0) {\n                    return cb(null, ex);\n                }\n                if (self._exclude.indexOf(ex) >= 0) {\n                    return cb(null, ex);\n                }\n                if (self._ignore.indexOf(ex) >= 0) {\n                    return cb(null, paths.empty, {});\n                }\n            }\n            if (err) cb(err, file, pkg)\n            else if (file) {\n                if (opts.preserveSymlinks && parent.id !== self._mdeps.top.id) {\n                    return cb(err, path.resolve(file), pkg, file)\n                }\n\n                fs.realpath(file, function (err, res) {\n                    cb(err, res, pkg, file);\n                });\n            } else cb(err, null, pkg)\n        });\n    };\n    \n    if (opts.builtins === false) {\n        mopts.modules = {};\n        self._exclude.push.apply(self._exclude, Object.keys(builtins));\n    }\n    else if (opts.builtins && isArray(opts.builtins)) {\n        mopts.modules = {};\n        opts.builtins.forEach(function (key) {\n            mopts.modules[key] = builtins[key];\n        });\n    }\n    else if (opts.builtins && typeof opts.builtins === 'object') {\n        mopts.modules = opts.builtins;\n    }\n    else mopts.modules = xtend(builtins);\n    \n    Object.keys(builtins).forEach(function (key) {\n        if (!has(mopts.modules, key)) self._exclude.push(key);\n    });\n    \n    mopts.globalTransform = [];\n    if (!this._bundled) {\n        this.once('bundle', function () {\n            self.pipeline.write({\n                transform: globalTr,\n                global: true,\n                options: {}\n            });\n        });\n    }\n    \n    var no = [].concat(opts.noParse).filter(Boolean);\n    var absno = no.filter(function(x) {\n        return typeof x === 'string';\n    }).map(function (x) {\n        return path.resolve(basedir, x);\n    });\n    \n    function globalTr (file) {\n        if (opts.detectGlobals === false) return through();\n        \n        if (opts.noParse === true) return through();\n        if (no.indexOf(file) >= 0) return through();\n        if (absno.indexOf(file) >= 0) return through();\n        \n        var parts = file.replace(/\\\\/g, '/').split('/node_modules/');\n        for (var i = 0; i < no.length; i++) {\n            if (typeof no[i] === 'function' && no[i](file)) {\n                return through();\n            }\n            else if (no[i] === parts[parts.length-1].split('/')[0]) {\n                return through();\n            }\n            else if (no[i] === parts[parts.length-1]) {\n                return through();\n            }\n        }\n\n        if (opts.commondir === false && opts.builtins === false) {\n          opts.insertGlobalVars = xtend({\n            __dirname: function(file, basedir) {\n              var dir = path.dirname(path.relative(basedir, file));\n              return 'require(\"path\").join(__dirname,' + dir.split(path.sep).map(JSON.stringify).join(',') + ')';\n            },\n            __filename: function(file, basedir) {\n              var filename = path.relative(basedir, file);\n              return 'require(\"path\").join(__dirname,' + filename.split(path.sep).map(JSON.stringify).join(',') + ')';\n            }\n          }, opts.insertGlobalVars);\n        }\n        \n        var vars = xtend({\n            process: function () { return \"require('_process')\" },\n        }, opts.insertGlobalVars);\n        \n        if (opts.bundleExternal === false) {\n            vars.process = undefined;\n            vars.buffer = undefined;\n        }\n\n        return insertGlobals(file, xtend(opts, {\n            debug: opts.debug,\n            always: opts.insertGlobals,\n            basedir: opts.commondir === false && isArray(opts.builtins)\n                ? '/'\n                : opts.basedir || process.cwd()\n            ,\n            vars: vars\n        }));\n    }\n    return mdeps(mopts);\n};\n\nBrowserify.prototype._recorder = function (opts) {\n    var self = this;\n    var ended = false;\n    this._recorded = [];\n    \n    if (!this._ticked) {\n        process.nextTick(function () {\n            self._ticked = true;\n            self._recorded.forEach(function (row) {\n                stream.push(row);\n            });\n            if (ended) stream.push(null);\n        });\n    }\n    \n    var stream = through.obj(write, end);\n    return stream;\n    \n    function write (row, enc, next) {\n        self._recorded.push(row);\n        if (self._ticked) this.push(row);\n        next();\n    }\n    function end () {\n        ended = true;\n        if (self._ticked) this.push(null);\n    }\n};\n\nBrowserify.prototype._json = function () {\n    return through.obj(function (row, enc, next) {\n        if (/\\.json$/.test(row.file)) {\n            var sanitizedString = sanitize(row.source);\n            try {\n                // check json validity\n                JSON.parse(sanitizedString);\n                row.source = 'module.exports=' + sanitizedString;\n            } catch (err) {\n                err.message = 'While parsing ' + (row.file || row.id) + ': ' + err.message\n                this.emit('error', err);\n                return;\n            }\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._unbom = function () {\n    return through.obj(function (row, enc, next) {\n        if (/^\\ufeff/.test(row.source)) {\n            row.source = row.source.replace(/^\\ufeff/, '');\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._unshebang = function () {\n    return through.obj(function (row, enc, next) {\n        if (/^#!/.test(row.source)) {\n            row.source = row.source.replace(/^#![^\\n]*\\n/, '');\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._syntax = function () {\n    var self = this;\n    return through.obj(function (row, enc, next) {\n        var h = shasum(row.source);\n        if (typeof self._syntaxCache[h] === 'undefined') {\n            var err = syntaxError(row.source, row.file || row.id);\n            if (err) return this.emit('error', err);\n            self._syntaxCache[h] = true;\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._dedupe = function () {\n    return through.obj(function (row, enc, next) {\n        if (!row.dedupeIndex && row.dedupe) {\n            row.source = 'arguments[4]['\n                + JSON.stringify(row.dedupe)\n                + '][0].apply(exports,arguments)'\n            ;\n            row.nomap = true;\n        }\n        else if (row.dedupeIndex) {\n            row.source = 'arguments[4]['\n                + JSON.stringify(row.dedupeIndex)\n                + '][0].apply(exports,arguments)'\n            ;\n            row.nomap = true;\n        }\n        if (row.dedupeIndex && row.indexDeps) {\n            row.indexDeps.dup = row.dedupeIndex;\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._label = function (opts) {\n    var self = this;\n    var basedir = defined(opts.basedir, process.cwd());\n    \n    return through.obj(function (row, enc, next) {\n        var prev = row.id;\n\n        if (self._external.indexOf(row.id) >= 0) return next();\n        if (self._external.indexOf('/' + relativePath(basedir, row.id)) >= 0) {\n            return next();\n        }\n        if (self._external.indexOf(row.file) >= 0) return next();\n        \n        if (row.index) row.id = row.index;\n        \n        self.emit('label', prev, row.id);\n        if (row.indexDeps) row.deps = row.indexDeps || {};\n        \n        Object.keys(row.deps).forEach(function (key) {\n            if (self._expose[key]) {\n                row.deps[key] = key;\n                return;\n            }\n\n            var afile = path.resolve(path.dirname(row.file), key);\n            var rfile = '/' + relativePath(basedir, afile);\n            if (self._external.indexOf(rfile) >= 0) {\n                row.deps[key] = rfile;\n            }\n            if (self._external.indexOf(afile) >= 0) {\n                row.deps[key] = rfile;\n            }\n            if (self._external.indexOf(key) >= 0) {\n                row.deps[key] = key;\n                return;\n            }\n            \n            for (var i = 0; i < self._extensions.length; i++) {\n                var ex = self._extensions[i];\n                if (self._external.indexOf(rfile + ex) >= 0) {\n                    row.deps[key] = rfile + ex;\n                    break;\n                }\n            }\n        });\n        \n        if (row.entry || row.expose) {\n            self._bpack.standaloneModule = row.id;\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype._emitDeps = function () {\n    var self = this;\n    return through.obj(function (row, enc, next) {\n        self.emit('dep', row);\n        this.push(row);\n        next();\n    })\n};\n\nBrowserify.prototype._debug = function (opts) {\n    var basedir = defined(opts.basedir, process.cwd());\n    return through.obj(function (row, enc, next) {\n        if (opts.debug) {\n            row.sourceRoot = 'file://localhost';\n            row.sourceFile = relativePath(basedir, row.file);\n        }\n        this.push(row);\n        next();\n    });\n};\n\nBrowserify.prototype.reset = function (opts) {\n    if (!opts) opts = {};\n    var hadExports = this._bpack.hasExports;\n    this.pipeline = this._createPipeline(xtend(opts, this._options));\n    this._bpack.hasExports = hadExports;\n    this._entryOrder = 0;\n    this._bundled = false;\n    this.emit('reset');\n};\n\nBrowserify.prototype.bundle = function (cb) {\n    var self = this;\n    if (cb && typeof cb === 'object') {\n        throw new Error(\n            'bundle() no longer accepts option arguments.\\n'\n            + 'Move all option arguments to the browserify() constructor.'\n        );\n    }\n    if (this._bundled) {\n        var recorded = this._recorded;\n        this.reset();\n        recorded.forEach(function (x) {\n            self.pipeline.write(x);\n        });\n    }\n    var output = readonly(this.pipeline);\n    if (cb) {\n        output.on('error', cb);\n        output.pipe(concat(function (body) {\n            cb(null, body);\n        }));\n    }\n\n    function ready () {\n        self.emit('bundle', output);\n        self.pipeline.end();\n    }\n\n    if (this._pending === 0) ready();\n    else this.once('_ready', ready);\n\n    this._bundled = true;\n    return output;\n};\n\nfunction isStream (s) { return s && typeof s.pipe === 'function' }\nfunction isAbsolutePath (file) {\n    var regexp = process.platform === 'win32' ?\n        /^\\w:/ :\n        /^\\//;\n    return regexp.test(file);\n}\nfunction isExternalModule (file) {\n    var regexp = process.platform === 'win32' ?\n        /^(\\.|\\w:)/ :\n        /^[\\/.]/;\n    return !regexp.test(file);\n}\nfunction relativePath (from, to) {\n    // Replace \\ with / for OS-independent behavior\n    return cachedPathRelative(from, to).replace(/\\\\/g, '/');\n}\n"]},"metadata":{},"sourceType":"script"}